<!DOCTYPE html>
<html>
<head><title>Token‚ÜîToken Swap</title></head>
<body>
  <h3>Swap Tokens</h3>
  <input id="tokenIn" placeholder="Token In Address" value="0x2260fac5e5542a773aa44fbcfedf7c193bc2c599"/> <!-- WBTC Ó®Å0Ó®Ç -->
  <input id="tokenOut" placeholder="Token Out Address" value="0xdac17f958d2ee523a2206206994597c13d831ec7"/> <!-- USDT Ó®Å1Ó®Ç -->
  <input id="amountIn" placeholder="Amount" />
  <div id="preview">Preview: --</div>
  <button id="approveBtn">Approve</button>
  <button id="swapBtn">Swap</button>

  <script src="https://cdn.jsdelivr.net/npm/ethers/dist/ethers.min.js"></script>
  <script>
    const routerAddress = "0x7a250d5630b4cF539739dF2C5dAcb4c659F2488D"; // Uniswap V2 Router02 Ó®Å2Ó®Ç
    const routerAbi = [
      "function getAmountsOut(uint256,address[]) view returns (uint256[])",
      "function swapExactTokensForTokens(uint256,uint256,address[],address,uint256) returns (uint256[])"
    ];
    const erc20Abi = [
      "function approve(address,uint256) external returns (bool)",
      "function decimals() view returns (uint8)"
    ];

    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const signer = provider.getSigner();
    const router = new ethers.Contract(routerAddress, routerAbi, signer);

    async function updatePreview() {
      const inAddr = document.getElementById("tokenIn").value;
      const outAddr = document.getElementById("tokenOut").value;
      const amount = document.getElementById("amountIn").value;
      if (!inAddr||!outAddr||!amount) return;
      const inContract = new ethers.Contract(inAddr, erc20Abi, signer);
      const outContract = new ethers.Contract(outAddr, erc20Abi, signer);
      const decIn = await inContract.decimals();
      const decOut = await outContract.decimals();
      const amtIn = ethers.utils.parseUnits(amount, decIn);
      const amounts = await router.getAmountsOut(amtIn, [inAddr, outAddr]);
      document.getElementById("preview").innerText =
        `Preview: ${ethers.utils.formatUnits(amounts[1], decOut)}`;
    }

    document.getElementById("tokenIn").addEventListener("change", updatePreview);
    document.getElementById("tokenOut").addEventListener("change", updatePreview);
    document.getElementById("amountIn").addEventListener("input", updatePreview);

    document.getElementById("approveBtn").onclick = async () => {
      await provider.send("eth_requestAccounts", []);
      const inAddr = document.getElementById("tokenIn").value;
      const amount = document.getElementById("amountIn").value;
      const inContract = new ethers.Contract(inAddr, erc20Abi, signer);
      const decIn = await inContract.decimals();
      const amtIn = ethers.utils.parseUnits(amount, decIn);
      await inContract.approve(routerAddress, amtIn);
      alert("Approved! üëç");
    };

    document.getElementById("swapBtn").onclick = async () => {
      await provider.send("eth_requestAccounts", []);
      const inAddr = document.getElementById("tokenIn").value;
      const outAddr = document.getElementById("tokenOut").value;
      const amount = document.getElementById("amountIn").value;
      const inContract = new ethers.Contract(inAddr, erc20Abi, signer);
      const outContract = new ethers.Contract(outAddr, erc20Abi, signer);
      const decIn = await inContract.decimals();
      const decOut = await outContract.decimals();
      const amtIn = ethers.utils.parseUnits(amount, decIn);
      const amounts = await router.getAmountsOut(amtIn, [inAddr, outAddr]);
      const minOut = amounts[1].mul(95).div(100); // 5% slippage
      const deadline = Math.floor(Date.now()/1000) + 600;
      await router.swapExactTokensForTokens(
        amtIn, minOut,
        [inAddr, outAddr],
        await signer.getAddress(),
        deadline
      );
      alert("Swapped! üéâ");
    };
  </script>
</body>
</html>
```Ó®Å3Ó®Ç
